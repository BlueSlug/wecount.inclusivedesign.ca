<div class="filter">
  <h2>{{ filterHeading }}</h2>
  {# Topic selections #}
  {# TODO: Dedupe this control #}
  <div class="filter-header">
    <h3>{{ topicsFilterTitle }}&nbsp;(<span class="filter-selected-choice-counter">0</span>)</h3>
    <button type="button" class="filter-expand-button" data-section="topics" aria-expanded="false" aria-label="expand or collapse the topics filter">
      <svg class="arrowdown" aria-label="hidden"><use xlink:href="#arrowdown" /></svg>
      <svg class="arrowup" aria-label="hidden"><use xlink:href="#arrowup" /></svg>
    </button>
  </div>

  <div class="filter-body" data-section="topics">
    <ul class="topic-choices">
      {% for category in resourceCategories.resourceCategories %}
        {# Since there are multiple filters on the page (both for the static view and for the dynamic view),
        randomize checkbox IDs to ensure they're unique and avoid html validation errors #}
        {% set categoryId = category.categoryId | randomizeFilter %}
        <li>
          <div class="topic-title {{ category.categoryId }}">
            <span id="{{ "title_" + categoryId }}">{{ category.categoryLabel }}</span>
            <svg>
              {# TODO: make this mapping configurable in the CMS #}
              {% if category.categoryId === "aiAndDisability" %}
                <use xlink:href="#topic-ai-and-disability" />
              {% elif category.categoryId === "dataScience" %}
                <use xlink:href="#topic-work-for-pwd-in-data-science" />
              {% elif category.categoryId === "aiEthics" %}
                <use xlink:href="#topic-ai-fairness-ethics-and-policy" />
              {% elif category.categoryId === "designAndMethods" %}
                <use xlink:href="#topic-technical-information" />
              {% endif %}
            </svg>
          </div>
          <div class="topic-checkbox">
            <input class="filter-checkbox" aria-labelledby="{{ "title_" + categoryId }}" type="checkbox" id="{{ categoryId }}" name="{{ 'c_' + category.categoryId }}">
            <label for="{{ categoryId }}"></label>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>

  {# Tag selections #}
  {# TODO: Dedupe this control #}
  <div class="filter-header">
    <h3>{{ tagsFilterTitle }}&nbsp;(<span class="filter-selected-choice-counter">0</span>)</h3>
    <button type="button" class="filter-expand-button" data-section="tags" aria-expanded="false" aria-label="expand or collapse the tags filter">
      <svg class="arrowdown" aria-label="hidden"><use xlink:href="#arrowdown" /></svg>
      <svg class="arrowup" aria-label="hidden"><use xlink:href="#arrowup" /></svg>
    </button>
  </div>

  <div class="filter-body" data-section="tags">
    <ul class="filter-choices">
      {% for tag in resourceTags.resourceTags  %}
        {% set tagId = tag.value | randomizeFilter %}
        <li>
          <input class="filter-checkbox" type="checkbox" id="{{ tagId }}" name="{{ 't_' + tag.value }}">
          <label for="{{ tagId }}">{{ tag.label }}</label>
        </li>
      {% endfor %}
    </ul>
  </div>

  {# Media Type selections #}
  {# TODO: Dedupe this control #}
  <div class="filter-header">
    <h3>{{ typesFilterTitle }}&nbsp;(<span class="filter-selected-choice-counter">0</span>)</h3>
    <button type="button" class="filter-expand-button" data-section="types" aria-expanded="false" aria-label="expand or collapse the media types filter">
      <svg class="arrowdown" aria-label="hidden"><use xlink:href="#arrowdown" /></svg>
      <svg class="arrowup" aria-label="hidden"><use xlink:href="#arrowup" /></svg>
    </button>
  </div>

  <div class="filter-body" data-section="types">
    <ul class="filter-choices">
      {% for mediaType in resourceTypes.resourceTypes  %}
        {% set typeId = mediaType.value | randomizeFilter %}
        <li>
          <input class="filter-checkbox" type="checkbox" id="{{ typeId }}" name="{{ 'm_' + mediaType.value }}">
          <label for="{{ typeId }}">{{ mediaType.value }}</label>
        </li>
      {% endfor %}
    </ul>
  </div>

  <div class="filter-buttons">
    <button class="reset-button" type="button">
      <svg><use xlink:href="#reset" /></svg><span>Reset Filters</span>
    </button>
  </div>
</div>
